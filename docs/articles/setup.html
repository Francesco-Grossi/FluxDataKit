<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setup and data provenance • flux-data-kit</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,300;0,400;0,700;1,300;1,400&amp;display=swap" rel="stylesheet">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ceslabs.css" rel="stylesheet">
<meta property="og:title" content="Setup and data provenance">
<meta property="og:description" content="flux-data-kit">
<meta name="twitter:card" content="summary">
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">

    <div class="navbar-header">

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="external-link hidden-sm hidden-xs" href="https://computationales.ethz.ch/">
          <img src="https://avatars.githubusercontent.com/u/93120344" id="hexlogo" alt="bluegreen labs"></a>
        <a class="external-link hidden-md hidden-lg" href="https://computationales.ethz.ch/">
          <img src="https://avatars.githubusercontent.com/u/93120344" id="hexlogo" alt="bluegreen labs"></a>
        <a class="navbar-brand" href="../index.html">
           <i>flux-data-kit <small>v0.1</small></i>
        </a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/setup.html">Setup and data provenance</a>
    </li>
  </ul>
</li>
        
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Setup and data provenance</h1>
                        <h4 data-toc-skip class="author">Koen
Hufkens</h4>
            
      
      
      <div class="hidden name"><code>setup.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>To setup the project first clone the git repository</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>git clone https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>computationales<span class="sc">/</span>flux_data_kit.git</span></code></pre></div>
<p>and install all critical packages required in gathering and
processing the data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="st">"devtools"</span>,
    <span class="st">"rvest"</span>,
    <span class="st">"tidyverse"</span>,
    <span class="st">"icoscp"</span>,
    <span class="st">"RCurl"</span>,
    <span class="st">"XML"</span>,
    <span class="st">"amerifluxr"</span>,
    <span class="st">"raster"</span>,
    <span class="st">"MODISTools"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span>
  <span class="st">"computationales/ingestr"</span>
<span class="op">)</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span>
  <span class="st">"computationales/rsofun"</span>
<span class="op">)</span></code></pre></div>
<p>With all tools installed we need to download the required input data
for aggregation.</p>
</div>
<div class="section level2">
<h2 id="data-provenance-downloads">data provenance (downloads)<a class="anchor" aria-label="anchor" href="#data-provenance-downloads"></a>
</h2>
<p>A list of numbered scripts is provided in the <code>data-raw</code>
directory which govern the downloading and compiling of intermediate
data. The numbered scripts should be run in sequence.</p>
<p>Due to login-walls, or missing API infrastructure, most data
downloads are still manual instead of automated. The below section
therefore links to the locations where you can manually get the data. No
fixes will be provided to facilitate this process further.</p>
<p>By default the data will be downloaded to a directory with the
<code>data-raw/</code> base path. Before running any scripts, check if
data is written to this directory. When you want to alter the storage
location you may use soft links.</p>
<div class="section level3">
<h3 id="flux-data">Flux data<a class="anchor" aria-label="anchor" href="#flux-data"></a>
</h3>
<p>All ecosystem flux sources should be downloaded at half-hourly (HH)
rates, unless otherwise specified. Data sources and final paths are
listed below. Top level paths for flux data are considered to be
sufficient for further processing.</p>
<p>Estimated data sizes are provided to indicate network load, although
for most these downloads should be easily manageable from a download and
storage perspective. Below you find a summary table of data volumes, nr.
of sites and the local storage paths for all flux data products
considered.</p>
<table class="table">
<thead><tr class="header">
<th>product</th>
<th align="center">data volume</th>
<th align="center">nr. sites</th>
<th align="left">data path</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>FLUXNET2015</td>
<td align="center">~35GB</td>
<td align="center">166</td>
<td align="left"><code>data-raw/flux_data/fluxnet2015/</code></td>
</tr>
<tr class="even">
<td>ICOS</td>
<td align="center">~12GB</td>
<td align="center">67</td>
<td align="left"><code>data-raw/flux_data/icos/</code></td>
</tr>
<tr class="odd">
<td>OneFlux</td>
<td align="center">~12GB</td>
<td align="center">74</td>
<td align="left"><code>data-raw/flux_data/oneflux/</code></td>
</tr>
<tr class="even">
<td>Plumber2</td>
<td align="center">~4GB</td>
<td align="center">112</td>
<td align="left"><code>data-raw/flux_data/plumber_fluxnet/</code></td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="fluxnet2015">FLUXNET2015<a class="anchor" aria-label="anchor" href="#fluxnet2015"></a>
</h4>
<p>FLUXNET2015 data is downloaded from the dedicated <a href="https://fluxnet.org/data/fluxnet2015-dataset/" class="external-link">download page</a>.
A login is required to access the data. We only considered the legacy
<strong>FULLSET</strong> data, which is covered by a CC-BY 4.0 license.
This limits the site count. Expanding this list is possible, but only
with permission from the PI sharing the data. We refer to the <a href="https://fluxnet.org/data/data-policy/" class="external-link">data policy</a> for more
details.</p>
</div>
<div class="section level4">
<h4 id="icos">ICOS<a class="anchor" aria-label="anchor" href="#icos"></a>
</h4>
<p>As of writing ICOS data was provided as a pre-release to our group
and is therefore not yet available for a wider public. However, this
data should be released shortly through the <a href="https://www.icos-cp.eu/data-services/about-data-portal" class="external-link">ICOS
carbon portal</a>.</p>
</div>
<div class="section level4">
<h4 id="oneflux">OneFlux<a class="anchor" aria-label="anchor" href="#oneflux"></a>
</h4>
<p>A limited set of sites has been reprocessed using the OneFlux
processing chain. This beta release can be found (here)[<a href="https://ameriflux.lbl.gov/data/download-data-oneflux-beta/" class="external-link uri">https://ameriflux.lbl.gov/data/download-data-oneflux-beta/</a>].
Over time a full dataset will supersede the FLUXNET2015 data. However,
now the site count is limited.</p>
</div>
<div class="section level4">
<h4 id="plumber2">Plumber2<a class="anchor" aria-label="anchor" href="#plumber2"></a>
</h4>
<p>“PLUMBER2 is a model intercomparison project for land surface models.
Multiple leading land surface and ecosystem models are evaluated for
water and carbon fluxes at 170 flux tower sites, spanning multiple
biomes and climate zones globally.” the full description of the dataset
can be found in the publication by <a href="https://doi.org/10.5194/essd-2021-181" class="external-link">Ukkola et al. 2021</a> and
combines FLUXNET2015, La Thuile and OzFlux collections.</p>
<p>The downloading and conversion is facilitated using a script
<code>00_download_convert_flux_data.R</code> included in the
<code>data-raw</code> directory.</p>
</div>
</div>
<div class="section level3">
<h3 id="gridded-products">Gridded products<a class="anchor" aria-label="anchor" href="#gridded-products"></a>
</h3>
<p>Other gridded data products are required to complement the flux data
for modelling purposes. Products required, data volumes and storage
paths are listed below. Detailed links to original publications and data
are provided below.</p>
<table class="table">
<thead><tr class="header">
<th>product</th>
<th align="center">data volume</th>
<th align="left">data path</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rooting zone water storage</td>
<td align="center">~80MB</td>
<td align="left"><code>data-raw/ancillary/cwdx80/</code></td>
</tr>
<tr class="even">
<td>Koeppen-Geiger</td>
<td align="center">~22MB</td>
<td align="left"><code>data-raw/ancillary/koeppen_geigen/</code></td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="rooting-zone-water-storage-capacity">Rooting zone water storage capacity<a class="anchor" aria-label="anchor" href="#rooting-zone-water-storage-capacity"></a>
</h4>
<p>Global rooting zone water storage capacity can be <a href="https://zenodo.org/record/5515246" class="external-link">downloaded here</a>.</p>
</div>
<div class="section level4">
<h4 id="koeppen-geiger-included-in-repo">Koeppen-Geiger (included in repo)<a class="anchor" aria-label="anchor" href="#koeppen-geiger-included-in-repo"></a>
</h4>
<p>Koeppen-Geiger climate classifications are downloaded from the recent
work by <a href="https://www.nature.com/articles/sdata2018214" class="external-link">Beck et
al. 2018</a>. Data can be downloaded from the <a href="http://www.gloh2o.org/koppen/" class="external-link">project website</a> but is also
included in the repository due to its small size.</p>
</div>
</div>
<div class="section level3">
<h3 id="remote-sensing-data">Remote sensing data<a class="anchor" aria-label="anchor" href="#remote-sensing-data"></a>
</h3>
<p>We include various MODIS products to complement the flux data. Data
are downloaded from Google Earth Engine using the gee_subset python
toolkit using the {ingestr} package. Data are stored in a product by
product basis. in the <code>data-raw/modis/</code> directory. Data is
downloaded using the <code>02_download_modis_data.R</code> script.</p>
<blockquote>
<p>Note that you will need to compile the meta-data list first (see
meta-data article).</p>
</blockquote>
<table class="table">
<thead><tr class="header">
<th>product</th>
<th align="center">data volume</th>
<th align="left">data path</th>
</tr></thead>
<tbody><tr class="odd">
<td>MODXXX</td>
<td align="center">~80MB</td>
<td align="left"><code>data-raw/modis/XZY/</code></td>
</tr></tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/computationales" target="_blank" class="external-link">
                          <div class="icon fab fa-github"></div></a>
                        <a href="https://computationales.ethz.ch/" target="_blank" class="external-link">
                          <div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/SteniBocker/" target="_blank" class="external-link">
                          <div class="icon fab fa-twitter"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Computationales</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Our Team</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://github.com/computationales" class="external-link">Packages</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Publications</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Blog</a></li>
                        </ul>
</div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  


  

  </body>
</html>
